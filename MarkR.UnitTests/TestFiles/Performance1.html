<h1>Header</h1>

<ul>
<li>One</li>
<li>Two</li>
<li>Three</li>
<li>Four</li>
</ul>

<h2>Code</h2>

<pre><code>#region References

using System;
using System.Linq;

#endregion

namespace MarkR
{
	public static class Processor
	{
		#region Static Methods

		/// &lt;summary&gt;
		/// Converts markdown input into HTML output.
		/// &lt;/summary&gt;
		/// &lt;param name=&quot;markdown&quot;&gt;The markdown text to convert.&lt;/param&gt;
		/// &lt;returns&gt;The HTML output from the markdown input.&lt;/returns&gt;
		public static string Convert(string markdown)
		{
			var lines = markdown.Split(new[] { Environment.NewLine }, StringSplitOptions.None).ToList();
			for (var i = 0; i &lt; lines.Count; i++)
			{
				if (lines[i].StartsWith(&quot;#&quot;))
				{
					lines[i] = ParseHeaders(lines[i]);
					continue;
				}

				if (lines[i].StartsWith(&quot;```&quot;))
				{
					for (var j = i + 1; j &lt; lines.Count; j++)
					{
						if (!lines[j].StartsWith(&quot;```&quot;))
						{
							continue;
						}

						// Set start of block
						var className = lines[i].Replace(&quot;```&quot;, string.Empty);
						lines[i] = className.Length &gt; 0 ? &quot;&lt;pre&gt;&lt;code class=\&quot;&quot; + className + &quot;\&quot;&gt;&quot; : &quot;&lt;pre&gt;&lt;code&gt;&quot;;
						lines[j] = &quot;&lt;/code&gt;&lt;/pre&gt;&quot;;
						i = j;
						break;
					}

					continue;
				}

				if (lines[i].StartsWith(&quot;* &quot;))
				{
					var j = i;
					while (++j &lt; lines.Count &amp;&amp; lines[j].StartsWith(&quot;* &quot;))
					{
						// Do nothing... but loop.
					}

					for (var k = i; k &lt; j; k++)
					{
						lines[k] = lines[k].Replace(&quot;* &quot;, &quot;&lt;li&gt;&quot;) + &quot;&lt;/li&gt;&quot;;
					}

					lines.Insert(i, &quot;&lt;ul&gt;&quot;);
					lines.Insert(j + 1, &quot;&lt;/ul&gt;&quot; );
					i = j + 1;
				}
			}

			return string.Join(Environment.NewLine, lines);
		}

		private static string ParseHeaders(string line)
		{
			if (line.StartsWith(&quot;######&quot;))
			{
				return line.Replace(&quot;###### &quot;, &quot;&lt;h6&gt;&quot;).Replace(&quot;######&quot;, &quot;&lt;h6&gt;&quot;) + &quot;&lt;/h6&gt;&quot;;
			}

			if (line.StartsWith(&quot;#####&quot;))
			{
				return line.Replace(&quot;##### &quot;, &quot;&lt;h5&gt;&quot;).Replace(&quot;#####&quot;, &quot;&lt;h5&gt;&quot;) + &quot;&lt;/h5&gt;&quot;;
			}

			if (line.StartsWith(&quot;####&quot;))
			{
				return line.Replace(&quot;#### &quot;, &quot;&lt;h4&gt;&quot;).Replace(&quot;####&quot;, &quot;&lt;h4&gt;&quot;) + &quot;&lt;/h4&gt;&quot;;
			}

			if (line.StartsWith(&quot;###&quot;))
			{
				return line.Replace(&quot;### &quot;, &quot;&lt;h3&gt;&quot;).Replace(&quot;###&quot;, &quot;&lt;h3&gt;&quot;) + &quot;&lt;/h3&gt;&quot;;
			}

			if (line.StartsWith(&quot;##&quot;))
			{
				return line.Replace(&quot;## &quot;, &quot;&lt;h2&gt;&quot;).Replace(&quot;##&quot;, &quot;&lt;h2&gt;&quot;) + &quot;&lt;/h2&gt;&quot;;
			}

			return line.Replace(&quot;# &quot;, &quot;&lt;h1&gt;&quot;).Replace(&quot;#&quot;, &quot;&lt;h1&gt;&quot;) + &quot;&lt;/h1&gt;&quot;;
		}

		#endregion
	}
}</code></pre>

<h3>Header Three</h3>
More text here...

<table>
	<tr>
		<td>col</td>
		<td>data</td>
	</tr>
</table>